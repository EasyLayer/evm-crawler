import { EventStatus } from '@easylayer/common/cqrs';

export interface NetworkRecord {
  version: number;
  requestId: string;
  status: EventStatus;
  type: string;
  payload: Record<string, any>;
  blockHeight: number;
}

export const networkTableSQL = `
CREATE TABLE IF NOT EXISTS network (
  version     INTEGER PRIMARY KEY DEFAULT 0,
  requestId   VARCHAR        DEFAULT NULL,
  status      TEXT           DEFAULT '${EventStatus.UNPUBLISHED}',
  type        VARCHAR        NOT NULL,
  payload     JSON           NOT NULL,
  blockHeight INTEGER        DEFAULT 0
);

CREATE UNIQUE INDEX IF NOT EXISTS UQ_network_v_reqid
  ON network (version, requestId);
CREATE INDEX IF NOT EXISTS IDX_network_blockh
  ON network (blockHeight);
`;

export const mockNetworks: NetworkRecord[] = [
  {
    version: 1,
    requestId: 'req-eth-1',
    status: EventStatus.PUBLISHED,
    type: 'EvmNetworkInitializedEvent',
    payload: {},
    blockHeight: 0,
  },
  {
    version: 2,
    requestId: 'req-eth-2',
    status: EventStatus.PUBLISHED,
    type: 'EvmNetworkBlocksAddedEvent',
    payload: {
      blocks: [
        {
          // Genesis block
          hash: '0xd4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3',
          blockNumber: 0,
          parentHash: '0x0000000000000000000000000000000000000000000000000000000000000000',
          nonce: '0x42',
          sha3Uncles: '0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347',
          logsBloom:
            '0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
          transactionsRoot: '0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421',
          stateRoot: '0xd7f8974fb5ac78d9ac099b9ad5018bedc2ce0a72dad1827a1709da30580f0544',
          receiptsRoot: '0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421',
          miner: '0x0000000000000000000000000000000000000000',
          difficulty: '0x400000000',
          totalDifficulty: '0x400000000',
          extraData: '0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa',
          size: 540,
          gasLimit: 5000,
          gasUsed: 0,
          timestamp: 1438269960,
          transactions: [],
          uncles: [],
        },
        {
          // Block 1
          hash: '0x88e96d4537bea4d9c05d12549907b32561d3bf31f45aae734cdc119f13406cb6',
          blockNumber: 1,
          parentHash: '0xd4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3',
          nonce: '0x689056015818adbe',
          sha3Uncles: '0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347',
          logsBloom:
            '0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
          transactionsRoot: '0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421',
          stateRoot: '0xd67e4d450343046425ae4271474353857ab860dbc0a1dde64b41b5cd3a532bf3',
          receiptsRoot: '0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421',
          miner: '0x05a56e2d52c817161883f50c441c3228cfe54d9f',
          difficulty: '0x3ff800000',
          totalDifficulty: '0x7ff800000',
          extraData: '0x476574682f76312e302e302f6c696e75782f676f312e342e32',
          size: 537,
          gasLimit: 5000,
          gasUsed: 0,
          timestamp: 1438269988,
          transactions: [],
          uncles: [],
        },
        {
          // Block 2 - with a transaction
          hash: '0xb495a1d7e6663152ae92708da4843337b958146015a2802f4193a410044698c9',
          blockNumber: 2,
          parentHash: '0x88e96d4537bea4d9c05d12549907b32561d3bf31f45aae734cdc119f13406cb6',
          nonce: '0x2e9344e0cbde83ce',
          sha3Uncles: '0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347',
          logsBloom:
            '0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
          transactionsRoot: '0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421',
          stateRoot: '0xf1c3f7d5c8e5b2c8fc5b2c8fc5b2c8fc5b2c8fc5b2c8fc5b2c8fc5b2c8fc5b2c8',
          receiptsRoot: '0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421',
          miner: '0x1a0a18ac4e037c5d7d1e2e0c8e5b2c8fc5b2c8fc',
          difficulty: '0x3ff000000',
          totalDifficulty: '0xbfe800000',
          extraData: '0x476574682f76312e302e302f6c696e75782f676f312e342e32',
          size: 594,
          gasLimit: 5000,
          gasUsed: 21000,
          timestamp: 1438270017,
          transactions: [
            {
              hash: '0x5c504ed432cb51138bcf09aa5e8a410dd4a1e204ef84bfed1be16dfba1b22060',
              nonce: '0x0',
              blockHash: '0xb495a1d7e6663152ae92708da4843337b958146015a2802f4193a410044698c9',
              blockNumber: 2,
              transactionIndex: 0,
              from: '0xa1e4380a3b1f749673e270229993ee55f35663b4',
              to: '0x5df9b87991262f6ba471f09758cde1c0fc1de734',
              value: '0x7a69',
              gas: '0x5208',
              gasPrice: '0x09184e72a000',
              input: '0x',
              v: '0x1c',
              r: '0x88ff6cf0fefd94db46111149ae4bfc179e9b94721fffd821d38d16464b3f71d0',
              s: '0x45e0aff800961cfce805daef7016b9b675c137a6a41a548f7b60a3484c06a33a',
            },
          ],
          uncles: [],
        },
        {
          // Block 3 - with contract creation
          hash: '0xe0c7c0b46e116b874354dce6f64b8581bd83e7b9e5e5d8b4a2d2e8d6f8b4a2d2',
          blockNumber: 3,
          parentHash: '0xb495a1d7e6663152ae92708da4843337b958146015a2802f4193a410044698c9',
          nonce: '0x4db7a1c01d8a8d8e',
          sha3Uncles: '0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347',
          logsBloom:
            '0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
          transactionsRoot: '0x1f7ac8de4e2e0b7d4e4c0b3d4e4c0b3d4e4c0b3d4e4c0b3d4e4c0b3d4e4c0b3d',
          stateRoot: '0xa2b4c6d8e0f2a4c6d8e0f2a4c6d8e0f2a4c6d8e0f2a4c6d8e0f2a4c6d8e0f2a4',
          receiptsRoot: '0x3c5e8f1a2b4c6d8e0f2a4c6d8e0f2a4c6d8e0f2a4c6d8e0f2a4c6d8e0f2a4c6',
          miner: '0x2a5b6c7d8e9f0a1b2c3d4e5f6a7b8c9d0e1f2a3b',
          difficulty: '0x3fe800000',
          totalDifficulty: '0xffe000000',
          extraData: '0x476574682f76312e302e302f6c696e75782f676f312e342e32',
          size: 1024,
          gasLimit: 5000,
          gasUsed: 53000,
          timestamp: 1438270045,
          transactions: [
            {
              hash: '0x1e2a4c6d8e0f2a4c6d8e0f2a4c6d8e0f2a4c6d8e0f2a4c6d8e0f2a4c6d8e0f2',
              nonce: '0x1',
              blockHash: '0xe0c7c0b46e116b874354dce6f64b8581bd83e7b9e5e5d8b4a2d2e8d6f8b4a2d2',
              blockNumber: 3,
              transactionIndex: 0,
              from: '0xa1e4380a3b1f749673e270229993ee55f35663b4',
              to: null, // Contract creation
              value: '0x0',
              gas: '0xcf08',
              gasPrice: '0x09184e72a000',
              input:
                '0x608060405234801561001057600080fd5b5060405161020038038061020083398101604081905261002f9161003d565b61003833610043565b610070565b60006020828403121561004f57600080fd5b5051919050565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b610181806100806000396000f3fe608060405234801561001057600080fd5b50600436106100365760003560e01c806370a082311461003b5780638da5cb5b14610064575b600080fd5b61004e610049366004610106565b610089565b60405161005b9190610128565b60405180910390f35b6000546001600160a01b03165b6040516001600160a01b03909116815260200161005b565b6001600160a01b0381166000908152600160205260409020545b919050565b600080fd5b6001600160a01b03811681146100c157600080fd5b50565b6000602082840312156100d657600080fd5b81356100e1816100ac565b9392505050565b6000602082840312156100fa57600080fd5b5035919050565b60006020828403121561011357600080fd5b813561011e816100ac565b9392505050565b9081526020019056fea26469706673582212204d4e7b7a6d8e1c3b5d7e9f8a2b4c6d8e0f2a4c6d8e0f2a4c6d8e0f2a4c6d8e0f64736f6c634300080a0033',
              contractAddress: '0x8ba1f109551bd432803012645hac136c6d8e0f2a',
              v: '0x1c',
              r: '0x2c4e6f8a0b2d4e6f8a0b2d4e6f8a0b2d4e6f8a0b2d4e6f8a0b2d4e6f8a0b2d4e',
              s: '0x6f8a0b2d4e6f8a0b2d4e6f8a0b2d4e6f8a0b2d4e6f8a0b2d4e6f8a0b2d4e6f8a',
            },
          ],
          uncles: [],
        },
      ],
    },
    blockHeight: 3,
  },
];
